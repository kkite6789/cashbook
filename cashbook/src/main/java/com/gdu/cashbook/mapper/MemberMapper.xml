<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.gdu.cashbook.mapper.MemberMapper">
  
	<select	id="selectMemberOne"
  			parameterType="com.gdu.cashbook.vo.LoginMember"
  			resultType="com.gdu.cashbook.vo.Member">
  			SELECT
  				member_id as memberId,
  				member_name as memberName,
  				member_addr as memberAddr,
  				member_phone as memberPhone,
  				member_email as memberEmail
  			FROM member
  			WHERE member_id=#{memberId}

  </select>
  <insert id="insertDeletedMember" parameterType="String">
  	INSERT INTO deletedmember(
		member_id
    )	VALUES(
    	#{memberId}
    )
  </insert>
  
  <select id="selectMemberId" parameterType="String" resultType="String">
  	SELECT
  		member_id
  	FROM(
  		SELECT member_id from member
  		UNION
  		SELECT member_id from deletedmember
		)t
  	WHERE member_id=#{memberIdCheck}
  	
  </select>
  <select id="selectLoginMember" parameterType="com.gdu.cashbook.vo.LoginMember" resultType="com.gdu.cashbook.vo.LoginMember">
  	SELECT
  		member_id as memberId,
  		member_pw as memberPw
  	FROM member
  	WHERE member_id=#{memberId}
  	  AND member_pw=PASSWORD(#{memberPw})
  </select>
   <select id="selectmemberList" parameterType="java.util.Map" resultType="com.gdu.cashbook.vo.Member">
  	SELECT 
  		member_id as memberId,
  		member_pw as memberPw,
  		member_name as memberName,
  		member_addr as memberAddr,
  		member_phone as memberPhone,
  		member_email as memberEmail
  	FROM member
  	ORDER BY member_id
  	LIMIT #{beginRow}, #{rowPerPage}
  </select>
  <delete id="deleteMember" parameterType="String">
  DELETE
  FROM member
  WHERE member_id=#{memberId}
  </delete>
  
  <update id="updateMember" parameterType="com.gdu.cashbook.vo.Member">
  	Update 
  		member
  	SET
  		member_pw=PASSWORD(#{memberPw}),
  		member_name=#{memberName},
  		member_addr=#{memberAddr},
  		member_phone=#{memberPhone},
  		member_email=#{memberEmail}
  	WHERE
  		member_id=#{memberId}
  	
  </update>
   <insert id="insertMember" parameterType="com.gdu.cashbook.vo.Member">
	INSERT INTO member(
		member_id,
    	member_pw,
    	member_name,
    	member_addr,
    	member_phone,
    	member_email
    	
    )	VALUES(
    		#{memberId},
    		PASSWORD(#{memberPw}),
    		#{memberName},
    		#{memberAddr},
    		#{memberPhone},
    		#{memberEmail}
    )
    
  </insert>
  </mapper>